post:
  tags:
    - Authorization
  summary: Manage Auth Token
  description: |
    Issue or refresh an UltraDNS API access token.

    **Notes**
    - Repeated failed logins may trigger temporary lockout.
    - Only one refresh token is valid at a time; obtaining new credentials invalidates the previous refresh token.
    - Users with “API Only Access” can authenticate to the API but cannot sign in to the Portal.
  operationId: manageAuthToken
  requestBody:
    content:
      application/x-www-form-urlencoded:
        schema:
          type: object
          required:
            - grant_type
          properties:
            grant_type:
              type: string
              enum: [password, refresh_token]
              description: The OAuth2 grant type to use for authentication
            username:
              type: string
              description: The username for your account. Required when grant_type is 'password'.
            password:
              type: string
              description: The password for your account. Required when grant_type is 'password'.
            refresh_token:
              type: string
              description: The Refresh Value token taken from the Authorization API call. Required when grant_type is 'refresh_token'.
            expire_in:
              type: integer
              description: Set the duration, in seconds, in which the Refresh Token will expire. Only applies to refresh_token grant type. Optional field - if not provided, defaults to 604800 (7 days). Allowed Value = 1 - 604800
        examples:
          Password Grant:
            summary: Authenticate with username and password
            value:
              grant_type: password
              username: 'doc-example'
              password: 'mypass123'
              expire_in: 86400
          Refresh Token Grant:
            summary: Refresh access token using refresh token
            value:
              grant_type: refresh_token
              refresh_token: '2b217543b15fdedffe95387ff0a383d47ab37615d7'
              expire_in: 86400
  responses:
    '200':
      description: Refresh Token / Generate Auth Token
      content:
        application/json:
          schema:
            $ref: '../components/schemas/TokenResponse.yaml'
          examples:
            Generate Auth Token:
              value:
                accessToken: 
                  eolraOeTINu6WHeS.zUc4sS1vUKjzmKe9QyJecMeG1XN1TqwI3eXGC0sRbco.3VjD74_dMLWk2ec3vUXPUcIb4zH3K4fS
                access_token: 
                  eolraOeTINu6WHeS.zUc4sS1vUKjzmKe9QyJecMeG1XN1TqwI3eXGC0sRbco.3VjD74_dMLWk2ec3vUXPUcIb4zH3K4fS
                expiresIn: '3600'
                expires_in: '3600'
                refreshToken: 2b217543b15fdedffe95387ff0a383d47ab37615d7
                refresh_token: 2b217543b15fdedffe95387ff0a383d47ab37615d7
                tokenType: Bearer
                token_type: Bearer
                username: doc-example
            Refresh Token:
              value:
                accessToken: 
                  q3hpnHtaHHfLzTq_.HFBMZ45a99dt5H_jOh0tLqrmDVhyCvE7EHlOe7DZ2F8.YvogkldtGkb9fNJ_vihT2ORGQpM_kRU7
                access_token: 
                  q3hpnHtaHHfLzTq_.HFBMZ45a99dt5H_jOh0tLqrmDVhyCvE7EHlOe7DZ2F8.YvogkldtGkb9fNJ_vihT2ORGQpM_kRU7
                expiresIn: '3600'
                expires_in: '3600'
                refreshToken: 729dd9ba9ddaeab58fcdb9615f50f5dadd715f4d72
                refreshTokenExpiresIn: '86400'
                refresh_token: 729dd9ba9ddaeab58fcdb9615f50f5dadd715f4d72
                refresh_token_expires_in: '86400'
                tokenType: Bearer
                token_type: Bearer
                username: doc-example
    '401':
      $ref: '../components/responses/Error401.yaml'
    '5XX':
      $ref: '../components/responses/Error5xx.yaml'
  security:
    - {}
